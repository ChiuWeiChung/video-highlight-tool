# 影片播放問題調試指南

## 🔍 問題診斷

如果看到黑色播放器且無法播放影片，請按照以下步驟調試：

### 1. 打開瀏覽器開發者工具

在瀏覽器中按 `F12` 或右鍵選擇「檢查」，查看 Console 標籤頁。

### 2. 觀察控制台日誌

上傳影片後，你應該看到以下日誌：

```
Created video URL: blob:http://localhost:5173/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
Video file type: video/mp4 (或其他格式)
Video file size: 1234567 (文件大小)
ReactPlayerWrapper rendering with URL: blob:http://localhost...
開始載入影片
影片可以播放
播放器已準備就緒
```

### 3. 故障排除

#### 情況 1: 沒有看到任何日誌
- 確認影片文件已成功上傳
- 檢查是否有 JavaScript 錯誤
- 重新整理頁面重試

#### 情況 2: 看到 URL 但沒有影片
- 檢查影片格式是否受支援
- 嘗試點擊「切換到原生播放器」按鈕
- 查看是否有播放器錯誤日誌

#### 情況 3: 播放器錯誤
如果看到播放器錯誤，系統會自動切換到原生 HTML5 播放器。

### 4. 支援的影片格式

- **推薦格式**: MP4 (H.264 編碼)
- **其他支援**: WebM, OGG
- **可能有問題**: AVI, MOV, MKV (取決於瀏覽器支援)

### 5. 手動切換播放器

在預覽區域右上角有「切換播放器」按鈕：
- **ReactPlayer**: 功能豐富，支援多格式
- **原生播放器**: HTML5 video 元素，相容性更好

## 🛠️ 技術細節

### 雙播放器架構

```typescript
// ReactPlayer - 主要選擇
<ReactPlayerWrapper
  url={videoUrl}
  playing={isPlaying}
  // ... 其他配置
/>

// 原生播放器 - 備用方案
<NativeVideoPlayer
  url={videoUrl}
  playing={isPlaying}
  // ... 相同配置
/>
```

### 自動 Fallback 機制

如果 ReactPlayer 發生錯誤，系統會：
1. 記錄錯誤到控制台
2. 自動切換到原生播放器
3. 重新初始化播放器狀態

### 調試日誌說明

| 日誌訊息 | 說明 |
|---------|------|
| `Created video URL: blob:...` | 成功創建影片 URL |
| `ReactPlayerWrapper rendering...` | ReactPlayer 開始渲染 |
| `開始載入影片` | 播放器開始載入影片文件 |
| `影片可以播放` | 影片已載入且可以播放 |
| `播放器已準備就緒` | 播放器完全準備好 |
| `播放器錯誤:` | 播放發生錯誤，會自動切換 |
| `切換到原生影片播放器` | 自動切換到備用播放器 |

## 🎯 測試建議

1. **測試不同格式的影片**
2. **觀察控制台日誌**
3. **手動切換播放器**
4. **檢查影片是否過大（建議 < 100MB）**
5. **確認瀏覽器支援 HTML5 video**

## 🔧 常見解決方案

### 如果完全無法播放：
1. 確認影片文件沒有損壞
2. 嘗試使用 MP4 格式的影片
3. 檢查文件大小是否合理
4. 重新整理頁面

### 如果播放卡頓：
1. 檢查影片文件大小
2. 確認網路連線穩定
3. 關閉其他消耗資源的程序

這個雙播放器系統提供了最大的相容性，確保影片可以在各種情況下正常播放！
